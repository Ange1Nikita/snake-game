(function(){"use strict";var t={8926:function(t,e,i){var s=i(3751),a=i(641);const o={id:"app"};function h(t,e,i,s,h,n){const r=(0,a.g2)("SnakeGame");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(r)])}var n=i(33);const r={class:"game-container"},c={class:"theme-buttons"},d={class:"score-board"},l=["width","height"],m={key:0};function u(t,e,i,s,o,h){return(0,a.uX)(),(0,a.CE)("div",r,[e[6]||(e[6]=(0,a.Lk)("h1",null,"Змейка",-1)),(0,a.Lk)("div",c,[(0,a.Lk)("button",{onClick:e[0]||(e[0]=t=>h.changeTheme("classic"))},"Классическая тема"),(0,a.Lk)("button",{onClick:e[1]||(e[1]=t=>h.changeTheme("night"))},"Ночная тема"),(0,a.Lk)("button",{onClick:e[2]||(e[2]=t=>h.changeTheme("space"))},"Космическая тема")]),(0,a.Lk)("div",d,[(0,a.Lk)("p",null,"Счёт: "+(0,n.v_)(o.score),1),(0,a.Lk)("p",null,"Рекорд: "+(0,n.v_)(o.highScore),1)]),(0,a.Lk)("canvas",{ref:"gameCanvas",width:o.canvasSize,height:o.canvasSize,onTouchstart:e[3]||(e[3]=(...t)=>h.handleTouchStart&&h.handleTouchStart(...t)),onTouchmove:e[4]||(e[4]=(...t)=>h.handleTouchMove&&h.handleTouchMove(...t)),onTouchend:e[5]||(e[5]=(...t)=>h.handleTouchEnd&&h.handleTouchEnd(...t))},null,40,l),o.gameOver?((0,a.uX)(),(0,a.CE)("p",m,"Игра окончена! Нажмите на экран для перезапуска.")):(0,a.Q3)("",!0)])}i(4114),i(8111),i(7588),i(3579);var f={data(){return{canvasSize:400,gridSize:20,snake:[{x:10,y:10}],food:{x:15,y:15},direction:{x:0,y:0},gameOver:!1,touchStartX:null,touchStartY:null,score:0,highScore:0,foodColorPhase:0,flowers:[],maxFlowers:10,grass:[],maxGrass:50,grassAnimationPhase:0,comets:[],cometInterval:null,maxComets:5,stars:[],maxStars:50,starBlinkInterval:null,speed:.2,initialSpeed:.2,headPosition:{x:10,y:10},gameLoopTimer:null,updateInterval:100,frameRate:60,lastUpdateTime:0,currentTheme:"classic",themes:{classic:{background:["#87CEEB","#98FB98"],snake:{fill:"green",stroke:"darkgreen"},food:{stroke:"darkred"}},night:{background:["#000033","#1a1a4d"],snake:{fill:"#00ff00",stroke:"#00cc00"},food:{stroke:"#ff4500"}},space:{background:["#000000","#000033"],snake:{fill:"#ffffff",stroke:"#cccccc"},food:{stroke:"#ffff00"}}}}},mounted(){const t=localStorage.getItem("currentTheme");t&&this.themes[t]?this.currentTheme=t:this.currentTheme="classic",this.startGame(),window.addEventListener("keydown",this.handleKeyDown),this.startCometSpawning()},beforeUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.stopCometSpawning()},methods:{generateFlowers(){this.flowers=[];for(let t=0;t<this.maxFlowers;t++){const t={x:Math.random()*this.canvasSize,y:Math.random()*this.canvasSize,coreSize:3*Math.random()+2,petalSize:5*Math.random()+3,coreColor:`hsl(${60*Math.random()}, 100%, 50%)`,petalColor:`hsl(${360*Math.random()}, 70%, 50%)`};this.flowers.push(t)}},generateGrass(){this.grass=[];for(let t=0;t<this.maxGrass;t++){const t={x:Math.random()*this.canvasSize,y:Math.random()*this.canvasSize,size:10*Math.random()+5,swayPhase:Math.random()*Math.PI*2};this.grass.push(t)}},generateStars(){this.stars=[];for(let t=0;t<this.maxStars;t++){const t={x:Math.random()*this.canvasSize,y:Math.random()*this.canvasSize,size:1.5*Math.random()+.5,blinkPhase:Math.random()*Math.PI*2};this.stars.push(t)}},spawnComet(){if(this.comets.length>=this.maxComets)return;const t=this.canvasSize/this.gridSize-1,e={x:Math.random()*t,y:-1,speed:.3*Math.random()+.1,size:2*Math.random()+1};this.comets.push(e)},startCometSpawning(){this.cometInterval=setInterval((()=>{"space"===this.currentTheme&&this.spawnComet()}),2e3)},stopCometSpawning(){clearInterval(this.cometInterval)},changeTheme(t){this.currentTheme!==t&&(this.currentTheme=t,localStorage.setItem("currentTheme",t),console.log(`Тема изменена на: ${t}`),"classic"===t?(this.generateGrass(),this.generateFlowers()):"night"===t&&this.generateStars(),this.drawGame())},startGame(){this.snake=[{x:10,y:10}],this.food={x:15,y:15},this.direction={x:0,y:0},this.gameOver=!1,this.score=0,this.speed=this.initialSpeed,this.headPosition={x:10,y:10},this.lastUpdateTime=Date.now(),this.gameLoop(),this.updateGameState()},updateGameState(){const t=Date.now(),e=t-this.lastUpdateTime;if(e>=this.updateInterval){this.lastUpdateTime=t;let e={x:this.snake[0].x+this.direction.x,y:this.snake[0].y+this.direction.y};if(e.x<0&&(e.x=this.canvasSize/this.gridSize-1),e.x>=this.canvasSize/this.gridSize&&(e.x=0),e.y<0&&(e.y=this.canvasSize/this.gridSize-1),e.y>=this.canvasSize/this.gridSize&&(e.y=0),this.snake.unshift({x:e.x,y:e.y}),e.x===this.food.x&&e.y===this.food.y?(this.spawnFood(),this.score++,this.score>this.highScore&&(this.highScore=this.score),this.playSound("sounds/eat.mp3"),this.speed<1&&(this.speed+=.01)):this.snake.pop(),this.snake.slice(1).some((t=>t.x===e.x&&t.y===e.y)))return this.gameOver=!0,void this.playSound("sounds/game-over.mp3")}requestAnimationFrame((()=>this.updateGameState()))},gameLoop(){if(this.gameOver||!this.$refs.gameCanvas)return;this.headPosition.x+=(this.snake[0].x-this.headPosition.x)*this.speed,this.headPosition.y+=(this.snake[0].y-this.headPosition.y)*this.speed,this.headPosition.x<0&&(this.headPosition.x+=this.canvasSize/this.gridSize),this.headPosition.x>=this.canvasSize/this.gridSize&&(this.headPosition.x-=this.canvasSize/this.gridSize),this.headPosition.y<0&&(this.headPosition.y+=this.canvasSize/this.gridSize),this.headPosition.y>=this.canvasSize/this.gridSize&&(this.headPosition.y-=this.canvasSize/this.gridSize),this.foodColorPhase+=.05,"classic"===this.currentTheme&&(this.grassAnimationPhase+=.05),"space"===this.currentTheme&&this.comets.forEach((t=>{t.y+=t.speed,t.y>this.canvasSize/this.gridSize&&(t.y=-1)})),this.$refs.gameCanvas&&this.drawGame();const t=1e3/this.frameRate;this.gameLoopTimer=setTimeout((()=>this.gameLoop()),t)},drawGame(){const t=this.$refs.gameCanvas,e=t.getContext("2d"),i=this.themes[this.currentTheme],s=e.createLinearGradient(0,0,this.canvasSize,this.canvasSize);if(s.addColorStop(0,i.background[0]),s.addColorStop(1,i.background[1]),e.fillStyle=s,e.fillRect(0,0,this.canvasSize,this.canvasSize),"classic"===this.currentTheme&&(this.grass.forEach((t=>{const i=5*Math.sin(t.swayPhase+this.grassAnimationPhase);e.save(),e.translate(t.x,t.y),e.rotate(i*Math.PI/180),e.fillStyle="#228B22",e.beginPath(),e.moveTo(0,0),e.lineTo(-t.size/3,-t.size),e.lineTo(t.size/3,-t.size),e.closePath(),e.fill(),e.restore()})),this.flowers.forEach((t=>{e.fillStyle=t.coreColor,e.beginPath(),e.arc(t.x,t.y,t.coreSize,0,2*Math.PI),e.fill(),e.fillStyle=t.petalColor;for(let i=0;i<2*Math.PI;i+=Math.PI/4){const s=t.x+Math.cos(i)*t.petalSize,a=t.y+Math.sin(i)*t.petalSize;e.beginPath(),e.arc(s,a,t.petalSize/2,0,2*Math.PI),e.fill()}}))),e.fillStyle=i.snake.fill,e.strokeStyle=i.snake.stroke,e.lineWidth=2,this.snake.forEach(((t,i)=>{const s=this.gridSize/2;let a,o;0===i?(a=this.headPosition.x*this.gridSize+s,o=this.headPosition.y*this.gridSize+s):(a=t.x*this.gridSize+s,o=t.y*this.gridSize+s),e.beginPath(),e.arc(a,o,s-2,0,2*Math.PI),e.fill(),e.stroke()})),this.food){const t=30*Math.sin(this.foodColorPhase)+30;e.fillStyle=`hsl(${t}, 100%, 50%)`,e.strokeStyle=i.food.stroke,e.lineWidth=2;const s=this.gridSize/2,a=this.food.x*this.gridSize+s,o=this.food.y*this.gridSize+s;e.beginPath(),e.arc(a,o,s-2,0,2*Math.PI),e.fill(),e.stroke()}"night"===this.currentTheme&&this.stars.forEach((t=>{const i=.5*Math.sin(t.blinkPhase+.001*Date.now())+.5,s=.8*i+.2;e.fillStyle=`rgba(255, 255, 255, ${s})`,e.beginPath(),e.arc(t.x,t.y,t.size,0,2*Math.PI),e.fill()})),"space"===this.currentTheme&&this.comets.forEach((t=>{const i=t.x*this.gridSize+this.gridSize/2,s=t.y*this.gridSize+this.gridSize/2;for(let a=0;a<3;a++){const o=t.size*(1-.3*a),h=1-.3*a;e.fillStyle=`rgba(255, 255, 255, ${h})`,e.beginPath(),e.arc(i,s-a*this.gridSize*.2,o,0,2*Math.PI),e.fill()}}))},spawnFood(){const t=Math.floor(this.canvasSize/this.gridSize)-1,e=Math.floor(this.canvasSize/this.gridSize)-1;let i,s=0;do{i={x:Math.floor(Math.random()*(t+1)),y:Math.floor(Math.random()*(e+1))},s++}while(this.snake.some((t=>t.x===i.x&&t.y===i.y))&&s<100);s>=100?console.error("Не удалось сгенерировать еду после 100 попыток!"):this.food=i},handleKeyDown(t){switch(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t.code)&&t.preventDefault(),this.gameOver&&"Space"===t.code&&this.startGame(),t.code){case"ArrowUp":0===this.direction.y&&(this.direction={x:0,y:-1});break;case"ArrowDown":0===this.direction.y&&(this.direction={x:0,y:1});break;case"ArrowLeft":0===this.direction.x&&(this.direction={x:-1,y:0});break;case"ArrowRight":0===this.direction.x&&(this.direction={x:1,y:0});break}},handleTouchStart(t){const e=t.touches[0];this.touchStartX=e.clientX,this.touchStartY=e.clientY},handleTouchMove(t){t.preventDefault()},handleTouchEnd(t){const e=t.changedTouches[0],i=e.clientX-this.touchStartX,s=e.clientY-this.touchStartY;Math.abs(i)>Math.abs(s)?(i>0&&0===this.direction.x&&(this.direction={x:1,y:0}),i<0&&0===this.direction.x&&(this.direction={x:-1,y:0})):(s>0&&0===this.direction.y&&(this.direction={x:0,y:1}),s<0&&0===this.direction.y&&(this.direction={x:0,y:-1}))},handleScreenClick(){this.gameOver&&this.startGame()},playSound(t){const e=new Audio(t);e.play()}}},g=i(6262);const S=(0,g.A)(f,[["render",u],["__scopeId","data-v-edee3b64"]]);var p=S,v={components:{SnakeGame:p}};const y=(0,g.A)(v,[["render",h]]);var z=y;(0,s.Ef)(z).mount("#app")}},e={};function i(s){var a=e[s];if(void 0!==a)return a.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,s,a,o){if(!s){var h=1/0;for(d=0;d<t.length;d++){s=t[d][0],a=t[d][1],o=t[d][2];for(var n=!0,r=0;r<s.length;r++)(!1&o||h>=o)&&Object.keys(i.O).every((function(t){return i.O[t](s[r])}))?s.splice(r--,1):(n=!1,o<h&&(h=o));if(n){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[s,a,o]}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,o,h=s[0],n=s[1],r=s[2],c=0;if(h.some((function(e){return 0!==t[e]}))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(r)var d=r(i)}for(e&&e(s);c<h.length;c++)o=h[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(d)},s=self["webpackChunksnake_game"]=self["webpackChunksnake_game"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504],(function(){return i(8926)}));s=i.O(s)})();
//# sourceMappingURL=app.0bd6f2c0.js.map